<!DOCTYPE html>
<html>
    <head>
        <title>Super8</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <style>
            canvas{
                width: 100%;
                height: 100%;
            }
            
            body{
                margin: 0px;
                overflow: hidden;
            }
        </style>
        
    </head>
    <body>
        
        <script src="three.min.js"></script>
        <!-- <script src="controls.js"></script> -->
        <!--<script src="navigation.js"></script> -->
        <script>
            //SCENE
            var scene = new THREE.Scene();
            
            //CAMERA
            var camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000); //Perspective(field of view, aspect ratio, near, far)
            camera.position.z = 25;
            camera.position.x = 0;
            camera.position.y = 0.3;

            //CONTROLS
            // controls = new THREE.OrbitControls(camera);
            
            //LIGHTS
            var directionalLight = new THREE.DirectionalLight("white");
            directionalLight.position.set(3,1,3);
            directionalLight.target.position.set(0,0,0);
            directionalLight.castShadow = true;
            directionalLight.shadowDarkness = 0.5;
            
            directionalLight.shadowCameraNear = 0;
            directionalLight.shadowCameraFar = 15;
            
            directionalLight.shadowCameraLeft = -5;
            directionalLight.shadowCameraRight = 5;
            directionalLight.shadowCameraTop = 5;
            directionalLight.shadowCameraBottom = -5;
            
            directionalLight.shadowCameraVisible = true;
            scene.add(directionalLight);
            
            var hemiLight = new THREE.HemisphereLight(0xffffff, 0.1);
            hemiLight.position.y = 20;
            scene.add(hemiLight);

            //RENDERER
            var renderer = new THREE.WebGLRenderer({antialias: true});
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMapEnabled = true;
            renderer.shadowMapSoft = true;
            renderer.shadowMapType = THREE.PCFSoftShadowMap;
            document.body.appendChild(renderer.domElement);

            //GEOMETRY 
                //HOUSE
                var box_geometry = new THREE.CubeGeometry(9,2.5,5);
                var box_material = new THREE.MeshPhongMaterial({color: "grey"});            
                var box = new THREE.Mesh(box_geometry, box_material);
                box.position.y = + 0.5;
                box.castShadow = true;
                scene.add(box);

                //GROUND
                var plane_geometry = new THREE.PlaneGeometry(50,50);
                var plane_material = new THREE.MeshPhongMaterial({color: "green"});            
                var plane = new THREE.Mesh(plane_geometry, plane_material);
                plane.position.y = -0.5;
                plane.rotateX(-Math.PI/2);
                plane.receiveShadow = true;
                scene.add(plane);
            
            //FUNCTION
            function render(){            
                renderer.render(scene,camera);
                requestAnimationFrame(render);
                
                
                // Arrow Controls
                document.addEventListener('keypress', checkKeys, false);
                
            }
            
            
            // CONTROLS
            function checkKeys(event){
            // Key-Numbers: http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000520.html
                
                event = event || window.event;
                //var keyCode = event.which;
                var pos = 0.4; // movement
                var rot = 0.1; // rotation
                
                // Position
                // W-Key :: Up
                if (event.charCode === 119){
                    camera.position.z -= pos;
                    //camera.position.y += 0.1;
                    //camera.position.y -= 0.1;
                }
                
                // Y-Key – Down
                else if (event.charCode === 97){
                    camera.position.x -= pos;
                }
               
                // A-Key – Left
                else if (event.charCode === 115){
                    camera.position.x += pos;
                }
                
                // S-Key – Right
                else if(event.charCode === 121){
                    camera.position.z += pos;
                }
                
                
                // Rotation
                // Arrow up - Rotate up
                else if (event.keyCode === 38){ 
                    camera.rotation.x += rot; 
                } 
                
                // Arrow down - Rotate down
                else if(event.keyCode === 40){ 
                    camera.rotation.x -= rot; 
                } 
                
                // Arrow left 
                else if(event.keyCode === 37){ 
                    camera.rotation.y += rot; 
                } 
                
                // Arrow right 
                else if(event.keyCode === 39){ 
                    camera.rotation.y -= rot; 
                }

            }




            render();
        </script>
        
    </body>
</html>
